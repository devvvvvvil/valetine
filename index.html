<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Mema üíú</title>

<style>

@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap');

body {
  margin: 0;
  height: 100vh;
  background: radial-gradient(circle at top, #e6ccff, #050008);
  display: flex;
  justify-content: center;
  align-items: center;
  font-family: "Poppins", sans-serif;
  overflow: hidden;
}

/* Rain */
.rain{
  position:fixed;
  width:2px;
  height:20px;
  background:rgba(255,255,255,0.4);
  animation:fallRain linear infinite;
  pointer-events:none;
  z-index:2;
}
@keyframes fallRain{to{transform:translateY(110vh);}}

/* Ending Hearts */
.heart{
  position:fixed;
  top:-20px;
  font-size:24px;
  color:#ff7bbd;
  z-index:9999;
  pointer-events:none;
  animation:fall linear forwards;
}
@keyframes fall{
  from{transform:translateY(0);opacity:1;}
  to{transform:translateY(110vh);opacity:0;}
}

/* Game Hearts */
.game-heart{
  position:fixed;
  top:-30px;
  font-size:30px;
  cursor:pointer;
  z-index:9999;
  animation:fallGame linear forwards;
}
@keyframes fallGame{to{transform:translateY(110vh);}}

/* Cry overlay */
.cry-mode{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.25);
  backdrop-filter:blur(2px);
  display:none;
  z-index:3;
}

/* Card */
.screen{
  text-align:center;
  background:#ffe4f1;
  padding:60px 65px;
  border-radius:22px;
  box-shadow:0 0 30px rgba(255,160,200,0.6);
  width:540px;
  min-height:460px;
  display:none;
  position:relative;
  border:2px solid #ff9ecf;
  z-index:5;
}
.screen.active{display:block;}
.screen.clean{box-shadow:none;}

/* Text */
h1{font-size:34px;color:#000;margin-bottom:20px;font-weight:600;}
p{font-size:19px;color:#000;line-height:1.7;white-space:pre-line;}

/* Buttons */
.buttons{position:relative;height:180px;margin-top:20px;}
button{
  padding:14px 34px;
  font-size:19px;
  border:none;
  border-radius:35px;
  cursor:pointer;
  position:absolute;
  font-weight:600;
}

/* Yes */
#yesBtn{
  background:linear-gradient(135deg,#ffb6d9,#ff7bbd);
  color:#12001f;
  left:25%;
  top:60px;
}
#yesBtn:hover{transform:scale(1.1);}

/* No */
#noBtn{
  background:#111;
  color:#fff;
  left:55%;
  top:60px;
}

/* Info */
.hint{margin-top:10px;font-size:15px;color:#444;}
.counter{font-size:14px;color:#a21caf;font-weight:600;}
.fun-msg{font-size:14px;color:#be185d;font-weight:600;}

/* Images */
.first-img{width:230px;border-radius:16px;margin-bottom:18px;}
.second-gif{width:240px;border-radius:18px;margin-bottom:20px;}

.game-info{
  margin-top:15px;
  font-size:18px;
  font-weight:600;
  color:#a21caf;
}

</style>
</head>

<body>

<audio id="bgMusic" src="music.mp3" loop></audio>
<audio id="sadMusic" src="sad.mp3" loop></audio>

<div class="cry-mode" id="cryMode"></div>


<!-- SCREEN 1 -->
<div class="screen active" id="screen1">

  <img src="photo.png" class="first-img">

  <h1>Mema, will you be my Valentine? üíú</h1>

  <div class="buttons">
    <button id="yesBtn">Yes ‚ù§Ô∏è</button>
    <button id="noBtn">No üò¢</button>
  </div>

  <div class="hint">Try to say no üò°</div>
  <div class="counter">Attempts: <span id="attempts">0</span></div>
  <div class="fun-msg" id="funMsg">Nice try üòè</div>

</div>


<!-- SCREEN 2 -->
<div class="screen" id="screen2">

  <h1>Forever Yours üíï</h1>

  <img src="love.gif" class="second-gif">

  <p id="typingText"></p>

<div class="game-info">

  üíú Catch the hearts to win my heart  <br><br>

  Score: <span id="score">0</span> / 15

</div>


</div>


<script>

const noBtn=document.getElementById("noBtn");
const yesBtn=document.getElementById("yesBtn");

const bgMusic=document.getElementById("bgMusic");
const sadMusic=document.getElementById("sadMusic");

const attemptsText=document.getElementById("attempts");
const funMsg=document.getElementById("funMsg");
const cryMode=document.getElementById("cryMode");

const screen1=document.getElementById("screen1");
const screen2=document.getElementById("screen2");

const typingText=document.getElementById("typingText");
const scoreText=document.getElementById("score");

let attempts=0;
let cryActive=false;
let rainInterval=null;

let score=0;
let gameInterval=null;


// Messages
const funnyMessages=[
  "Nice try üòè","Not happening üòÇ","Give up üíÄ","Still trying üò≠",
  "JUST CLICK YES üò§","I‚Äôm crying üò¢","Please üíú","Okay I lost üíÄ"
];

const baseMessage=`
Thank you for choosing me ‚ù§Ô∏è

You are my favorite person ü•∞
Every moment with you is special ‚ú®

I love you forever üíú
`;


// Rain
function startRain(){
  rainInterval=setInterval(()=>{
    const d=document.createElement("div");
    d.className="rain";

    d.style.left=Math.random()*100+"vw";
    d.style.animationDuration=(1+Math.random()*1.5)+"s";

    document.body.appendChild(d);
    setTimeout(()=>d.remove(),2000);
  },60);
}

function stopRain(){
  clearInterval(rainInterval);
  document.querySelectorAll(".rain").forEach(r=>r.remove());
}


// NO
noBtn.addEventListener("mouseenter",()=>{

  attempts++;
  attemptsText.textContent=attempts;

  funMsg.textContent=
    funnyMessages[attempts%funnyMessages.length];

  if(attempts>=6 && !cryActive){

    cryActive=true;

    sadMusic.currentTime=0;
    sadMusic.play().catch(()=>{});

    cryMode.style.display="block";
    startRain();
  }

  const x=Math.random()*(innerWidth-120);
  const y=Math.random()*(innerHeight-60);

  noBtn.style.position="fixed";
  noBtn.style.left=x+"px";
  noBtn.style.top=y+"px";
});


// YES
yesBtn.addEventListener("click",()=>{

  sadMusic.pause();
  sadMusic.currentTime=0;

  bgMusic.currentTime=0;
  bgMusic.play().catch(()=>{});

  cryMode.style.display="none";
  stopRain();

  screen2.classList.add("clean");

  screen1.classList.remove("active");
  screen2.classList.add("active");

  startTyping();

  setTimeout(startGame,2500);
});


// Typing
let i=0;
function startTyping(){

  typingText.innerHTML="";
  i=0;

  const t=setInterval(()=>{
    typingText.innerHTML+=baseMessage[i];
    i++;
    if(i>=baseMessage.length) clearInterval(t);
  },45);
}


// GAME
function startGame(){

  score=0;
  scoreText.textContent=score;

  gameInterval=setInterval(spawnGameHeart,800);
}


function spawnGameHeart(){

  const h=document.createElement("div");
  h.className="game-heart";
  h.innerHTML="üíú";

  h.style.left=Math.random()*90+"vw";
  h.style.animationDuration=(3+Math.random()*2)+"s";

  document.body.appendChild(h);

  h.onclick=()=>{

    h.remove();
    score++;

    scoreText.textContent=score;

    if(score>=15){
      winGame();
    }
  };

  setTimeout(()=>h.remove(),6000);
}


function winGame(){

  clearInterval(gameInterval);

  document.querySelectorAll(".game-heart").forEach(h=>h.remove());

  typingText.innerHTML = `
Thank you for choosing me ‚ù§Ô∏è

You are my favorite person ü•∞
Every moment with you is special ‚ú®

üíú Mema, you caught my heart forever 
I‚Äôm yours‚Ä¶ always üíç
  `;

  startHearts();
}


// Ending hearts
function startHearts(){

  setInterval(()=>{

    const h=document.createElement("div");
    h.className="heart";
    h.innerHTML="üíú";

    h.style.left=Math.random()*100+"vw";
    h.style.animationDuration=(3+Math.random()*4)+"s";

    document.body.appendChild(h);

    setTimeout(()=>h.remove(),7000);

  },220);
}

</script>

</body>
</html>

